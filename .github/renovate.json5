{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",

  extends: ["config:best-practices"],

  timezone: "Etc/UTC",
  schedule: ["before 3am on saturday"],

  enabledManagers: ["nix", "regex", "github-actions"],

  nix: {
    enabled: true,
    fileMatch: ["flake\\.nix$", "flake\\.lock$", "\\.nix$"],
  },

  // Normal docker images (like Dozzle) work automatically.
  // No custom rules needed.

  // SDR-E regex manager (ONLY applies to SDR-E)
  regexManagers: [
    {
      fileMatch: ["\\.nix$"],
      matchStrings: [
        // capture SDR-E image patterns only
        'image\\s*=\\s*"(?<depName>ghcr\\.io\\/sdr-enthusiasts\\/[^:]+):(?<currentValue>[^"]+)"',
      ],
      datasourceTemplate: "docker",
      versioningTemplate: "loose", // allow "latest-build-XYZ"
      extractVersionTemplate: ".*-(?<version>\\d+)$",
    },
  ],
}
